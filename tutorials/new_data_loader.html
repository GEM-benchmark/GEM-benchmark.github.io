<!DOCTYPE html><html><head><meta charSet="utf-8"/><meta name="viewport" content="width=device-width"/><link rel="icon" href="/favicon.ico"/><meta name="description" content="Benchmark natural language generation systems with GEM."/><meta property="og:image" content="https://og-image.now.sh/**GEM**%20Benchmark.png?theme=light&amp;md=1&amp;fontSize=100px&amp;images=https%3A%2F%2Fassets.vercel.com%2Fimage%2Fupload%2Ffront%2Fassets%2Fdesign%2Fvercel-triangle-black.svg"/><meta name="og:title" content="GEM"/><meta name="twitter:card" content="summary_large_image"/><title>GEM <!-- -->Adding a data loader</title><meta name="next-head-count" content="8"/><link rel="preload" href="/_next/static/css/86a77084a15a5546.css" as="style"/><link rel="stylesheet" href="/_next/static/css/86a77084a15a5546.css" data-n-g=""/><link rel="preload" href="/_next/static/css/50ad98e60bd49ad7.css" as="style"/><link rel="stylesheet" href="/_next/static/css/50ad98e60bd49ad7.css" data-n-p=""/><noscript data-n-css=""></noscript><script defer="" nomodule="" src="/_next/static/chunks/polyfills-78c92fac7aa8fdd8.js"></script><script src="/_next/static/chunks/webpack-b48e3bfe07390621.js" defer=""></script><script src="/_next/static/chunks/framework-7a7e500878b44665.js" defer=""></script><script src="/_next/static/chunks/main-a56c17dda72126ba.js" defer=""></script><script src="/_next/static/chunks/pages/_app-da8862f0ec3a97c1.js" defer=""></script><script src="/_next/static/chunks/c16184b3-ddb1b99b5e568a2a.js" defer=""></script><script src="/_next/static/chunks/50-3dccc3616b494db8.js" defer=""></script><script src="/_next/static/chunks/pages/tutorials/%5Bid%5D-78530e674236e7c8.js" defer=""></script><script src="/_next/static/b8rjfKshCOVHfiTDQnV_D/_buildManifest.js" defer=""></script><script src="/_next/static/b8rjfKshCOVHfiTDQnV_D/_ssgManifest.js" defer=""></script></head><body><div id="__next"><div class="layout_background__oCFQX undefined"><header class="layout_header__SFlEE"><div class="navbar_navwrapper__RkXSe"><div class="navbar_gradbar__Vli6s"></div><nav class="navbar_navbar__vdWdK"><span class="utils_headingLg__RYtYb navbar_navbarlogo__u28NK"><a href="/"><a>GEM BENCHMARK</a></a></span><div class="navbar_menutoggle__4Urrc" id="mobile-menu"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="bars" class="svg-inline--fa fa-bars navbar_bar__f8cyd" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><path fill="currentColor" d="M0 96C0 78.3 14.3 64 32 64H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32C14.3 128 0 113.7 0 96zM0 256c0-17.7 14.3-32 32-32H416c17.7 0 32 14.3 32 32s-14.3 32-32 32H32c-17.7 0-32-14.3-32-32zM448 416c0 17.7-14.3 32-32 32H32c-17.7 0-32-14.3-32-32s14.3-32 32-32H416c17.7 0 32 14.3 32 32z"></path></svg></div><ul><li class="navbar_navitem__15TsF navbar_pushright___9_8s"><a href="/resources"><a>Resources</a></a></li><li class="navbar_navitem__15TsF"><a href="/data_cards"><a>Data Cards</a></a></li><li class="navbar_navitem__15TsF"><a href="/model_cards"><a>Model Cards</a></a></li><li class="navbar_navitem__15TsF"><a href="/tutorials"><a>tutorials</a></a></li><li class="navbar_navitem__15TsF"><a href="/results"><a>Results</a></a></li><li class="navbar_navitem__15TsF"><a href="/papers"><a>Papers</a></a></li><li class="navbar_navitem__15TsF"><a href="/workshop"><a>Workshop</a></a></li></ul></nav></div></header><div class="layout_container__FUycR undefined"><main><article><span class="utils_headingXl__zlq1q">Adding a data loader</span><span class="utils_smallSpace__dcJPu"></span><span class="utils_lightText__B_gv3">Data</span><div><p>We are using the HuggingFace hub to host all new datasets. All you will have to do is to upload your dataset, along with potential challenge splits, using the steps outlined below.</p>
<h2 id="user-content-table-of-contents">Table of Contents</h2>
<ul>
<li><a href="#setup">Setup</a>
<ul>
<li><a href="#create-a-huggingface-account">Create a HuggingFace account</a></li>
<li><a href="#join-the-gem-organization">Join the GEM Organization</a></li>
<li><a href="#install-prerequisites">Install prerequisites</a></li>
</ul>
</li>
<li><a href="#creating-the-dataset">Creating the dataset</a>
<ul>
<li><a href="#set-up-the-repository">Set-up the repository</a></li>
<li><a href="#preparing-the-files">Preparing the files</a></li>
<li><a href="#uploading-the-dataset">Uploading the dataset</a></li>
</ul>
</li>
<li><a href="#potential-errors">Potential Errors</a>
<ul>
<li><a href="#git-lfs-is-not-a-git-command">git: 'lfs' is not a git command.</a></li>
<li><a href="#403-client-error-forbidden-for-url">403 Client Error: Forbidden for url</a></li>
</ul>
</li>
</ul>
<h2 id="user-content-setup">Setup</h2>
<h3 id="user-content-create-a-huggingface-account">Create a HuggingFace account</h3>
<p>To upload the dataset, you will need a HuggingFace account. If you already have one, you can skip this step.</p>
<p>If not, go to <a href="https://huggingface.co/join">huggingface.co/join</a> and create an account.</p>
<h3 id="user-content-join-the-gem-organization">Join the GEM Organization</h3>
<p>We are hosting all datasets in the GEM organization which you can join by following <a href="https://huggingface.co/organizations/GEM/share/PDrZPZBSZTtlPlsgCCYfTCbrQAOgrUNZmk">this link</a>.</p>
<h3 id="user-content-install-prerequisites">Install prerequisites</h3>
<p>To install all the requirements, follow the steps below:</p>
<pre><code><span># Install the hub interface.</span>
pip install huggingface_hub
<span># Install Git for large files.</span>
git lfs install
<span># Log in to the hub</span>
huggingface-cli login</code></pre>
<p>Great, you are now prepared to create your dataset!</p>
<h2 id="user-content-creating-the-dataset">Creating the dataset</h2>
<p>The following steps largely follow <a href="https://huggingface.co/docs/datasets/share.html#add-a-community-dataset">this tutorial</a>.</p>
<h3 id="user-content-set-up-the-repository">Set-up the repository</h3>
<p>First, we will create the empty repository we will use to host the dataset.</p>
<pre><code>huggingface-cli repo create YOUR_DATASET_NAME --<span>type</span> dataset --organization GEM
<span># Once created, we can download it.</span>
git <span>clone</span> https://huggingface.co/datasets/GEM/YOUR_DATASET_NAME</code></pre>
<h3 id="user-content-preparing-the-files">Preparing the files</h3>
<p>You will need to add the following files to the repository.</p>
<ol>
<li>
<p><code>your_dataset_name.json</code> is a Dataset card that is created following our other tutorial and using our <a href="https://huggingface.co/spaces/GEM/DatasetCardForm">collection tool</a>. If you are completing the data part first, feel free to leave it empty for now. However, only a dataset with completed data card is part of GEM, so please add it once it is ready.</p>
</li>
<li>
<p>The raw data files of the dataset (optional, if they are hosted elsewhere you can specify the URLs in the dataset script).</p>
</li>
<li>
<p><code>your_dataset_name.py</code> is your dataset loading script (optional if your data files are already in the supported formats csv/jsonl/json/parquet/txt). For information on how to create a dataset script, see the <a href="https://huggingface.co/docs/datasets/dataset_script.html">documentation</a>. You can start from the <a href="https://github.com/huggingface/datasets/blob/master/templates/new_dataset_script.py">template</a> and simply fill in the details.</p>
</li>
<li>
<p><code>dataset_infos.json</code> contains metadata about the dataset (required only if you have a dataset script).</p>
</li>
</ol>
<p>While we don't have strong restrictions on the dataset formats, please follow the guidelines:</p>
<ol>
<li>Each dataset should have splits named <code>train</code>, <code>validation</code>, and <code>test</code>. Additional challenge sets splits can be named <code>challenge_${name}</code> for consistency.</li>
<li>Each split should have a field called <code>gem_id</code> which has the naming convention of <code>GEM-${DATASET_NAME}-${SPLIT-NAME}-${id}</code> where <code>id</code> is an incrementing number starting at 1. Please look <a href="https://github.com/huggingface/datasets/blob/master/datasets/gem/gem.py#L936">at our existing data loader</a> for reference.</li>
</ol>
<h3 id="user-content-uploading-the-dataset">Uploading the dataset</h3>
<p>First add all the dataset files to <code>git lfs</code> tracking and then use git as usual to track all other files.</p>
<pre><code><span>cp</span> /somewhere/data/*.json .
git lfs track *.json
git add .gitattributes
git add *.json
git commit -m <span>"add json files"</span></code></pre>
<p>Afterwards you can also add the data card and all other files and commit them. Once everything is ready, simply run <code>git push</code>. After you enter your HuggingFace username and password, everything will be uploaded to the Hub!
You can find an example dataset with a challenge dataset (generated using an NL-Augmenter transformation) <a href="https://huggingface.co/datasets/GEM/test-transform/tree/main">here</a>.</p>
<p>You can update the dataset simply by pushing updates the same way.</p>
<h2 id="user-content-potential-errors">Potential Errors</h2>
<h3 id="user-content-git-lfs-is-not-a-git-command">git: 'lfs' is not a git command.</h3>
<p>git lfs needs to be installed separately. Depending on your operating system, you can follow <a href="https://stackoverflow.com/questions/48734119/git-lfs-is-not-a-git-command-unclear">this post</a> to solve the issue.</p>
<h3 id="user-content-403-client-error-forbidden-for-url">403 Client Error: Forbidden for url</h3>
<p>You may encounter the following when trying to create a dataset:
<code>403 Client Error: Forbidden for url: https://huggingface.co/api/repos/create - You don't have the rights to create a dataset under this namespace</code></p>
<p>This happens when you are not part of the organization or have a typo in the creation command. Ensure that you are (1) logged in, (2) member of the GEM organization, and (3) have typed the <code>--organization GEM</code> command using all upper case letters.</p>
</div></article></main><div class="layout_push__lpoMK"></div></div><footer class="layout_footer__WlhMu utils_eggshell__3hbbY"><span class="layout_backToHome__D9QFr"><a href="/"><a>← Home</a></a></span><span>If you have any questions, please join our <a href="https://groups.google.com/g/gem-benchmark" target="_blank" class="utils_accentUnderline__VG89l">google group</a> for support.</span></footer></div></div><script id="__NEXT_DATA__" type="application/json">{"props":{"pageProps":{"taskData":{"contentHtml":"\u003cp\u003eWe are using the HuggingFace hub to host all new datasets. All you will have to do is to upload your dataset, along with potential challenge splits, using the steps outlined below.\u003c/p\u003e\n\u003ch2 id=\"user-content-table-of-contents\"\u003eTable of Contents\u003c/h2\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#setup\"\u003eSetup\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#create-a-huggingface-account\"\u003eCreate a HuggingFace account\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#join-the-gem-organization\"\u003eJoin the GEM Organization\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#install-prerequisites\"\u003eInstall prerequisites\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#creating-the-dataset\"\u003eCreating the dataset\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#set-up-the-repository\"\u003eSet-up the repository\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#preparing-the-files\"\u003ePreparing the files\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#uploading-the-dataset\"\u003eUploading the dataset\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#potential-errors\"\u003ePotential Errors\u003c/a\u003e\n\u003cul\u003e\n\u003cli\u003e\u003ca href=\"#git-lfs-is-not-a-git-command\"\u003egit: 'lfs' is not a git command.\u003c/a\u003e\u003c/li\u003e\n\u003cli\u003e\u003ca href=\"#403-client-error-forbidden-for-url\"\u003e403 Client Error: Forbidden for url\u003c/a\u003e\u003c/li\u003e\n\u003c/ul\u003e\n\u003c/li\u003e\n\u003c/ul\u003e\n\u003ch2 id=\"user-content-setup\"\u003eSetup\u003c/h2\u003e\n\u003ch3 id=\"user-content-create-a-huggingface-account\"\u003eCreate a HuggingFace account\u003c/h3\u003e\n\u003cp\u003eTo upload the dataset, you will need a HuggingFace account. If you already have one, you can skip this step.\u003c/p\u003e\n\u003cp\u003eIf not, go to \u003ca href=\"https://huggingface.co/join\"\u003ehuggingface.co/join\u003c/a\u003e and create an account.\u003c/p\u003e\n\u003ch3 id=\"user-content-join-the-gem-organization\"\u003eJoin the GEM Organization\u003c/h3\u003e\n\u003cp\u003eWe are hosting all datasets in the GEM organization which you can join by following \u003ca href=\"https://huggingface.co/organizations/GEM/share/PDrZPZBSZTtlPlsgCCYfTCbrQAOgrUNZmk\"\u003ethis link\u003c/a\u003e.\u003c/p\u003e\n\u003ch3 id=\"user-content-install-prerequisites\"\u003eInstall prerequisites\u003c/h3\u003e\n\u003cp\u003eTo install all the requirements, follow the steps below:\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\u003cspan\u003e# Install the hub interface.\u003c/span\u003e\npip install huggingface_hub\n\u003cspan\u003e# Install Git for large files.\u003c/span\u003e\ngit lfs install\n\u003cspan\u003e# Log in to the hub\u003c/span\u003e\nhuggingface-cli login\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eGreat, you are now prepared to create your dataset!\u003c/p\u003e\n\u003ch2 id=\"user-content-creating-the-dataset\"\u003eCreating the dataset\u003c/h2\u003e\n\u003cp\u003eThe following steps largely follow \u003ca href=\"https://huggingface.co/docs/datasets/share.html#add-a-community-dataset\"\u003ethis tutorial\u003c/a\u003e.\u003c/p\u003e\n\u003ch3 id=\"user-content-set-up-the-repository\"\u003eSet-up the repository\u003c/h3\u003e\n\u003cp\u003eFirst, we will create the empty repository we will use to host the dataset.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003ehuggingface-cli repo create YOUR_DATASET_NAME --\u003cspan\u003etype\u003c/span\u003e dataset --organization GEM\n\u003cspan\u003e# Once created, we can download it.\u003c/span\u003e\ngit \u003cspan\u003eclone\u003c/span\u003e https://huggingface.co/datasets/GEM/YOUR_DATASET_NAME\u003c/code\u003e\u003c/pre\u003e\n\u003ch3 id=\"user-content-preparing-the-files\"\u003ePreparing the files\u003c/h3\u003e\n\u003cp\u003eYou will need to add the following files to the repository.\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003eyour_dataset_name.json\u003c/code\u003e is a Dataset card that is created following our other tutorial and using our \u003ca href=\"https://huggingface.co/spaces/GEM/DatasetCardForm\"\u003ecollection tool\u003c/a\u003e. If you are completing the data part first, feel free to leave it empty for now. However, only a dataset with completed data card is part of GEM, so please add it once it is ready.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003eThe raw data files of the dataset (optional, if they are hosted elsewhere you can specify the URLs in the dataset script).\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003eyour_dataset_name.py\u003c/code\u003e is your dataset loading script (optional if your data files are already in the supported formats csv/jsonl/json/parquet/txt). For information on how to create a dataset script, see the \u003ca href=\"https://huggingface.co/docs/datasets/dataset_script.html\"\u003edocumentation\u003c/a\u003e. You can start from the \u003ca href=\"https://github.com/huggingface/datasets/blob/master/templates/new_dataset_script.py\"\u003etemplate\u003c/a\u003e and simply fill in the details.\u003c/p\u003e\n\u003c/li\u003e\n\u003cli\u003e\n\u003cp\u003e\u003ccode\u003edataset_infos.json\u003c/code\u003e contains metadata about the dataset (required only if you have a dataset script).\u003c/p\u003e\n\u003c/li\u003e\n\u003c/ol\u003e\n\u003cp\u003eWhile we don't have strong restrictions on the dataset formats, please follow the guidelines:\u003c/p\u003e\n\u003col\u003e\n\u003cli\u003eEach dataset should have splits named \u003ccode\u003etrain\u003c/code\u003e, \u003ccode\u003evalidation\u003c/code\u003e, and \u003ccode\u003etest\u003c/code\u003e. Additional challenge sets splits can be named \u003ccode\u003echallenge_${name}\u003c/code\u003e for consistency.\u003c/li\u003e\n\u003cli\u003eEach split should have a field called \u003ccode\u003egem_id\u003c/code\u003e which has the naming convention of \u003ccode\u003eGEM-${DATASET_NAME}-${SPLIT-NAME}-${id}\u003c/code\u003e where \u003ccode\u003eid\u003c/code\u003e is an incrementing number starting at 1. Please look \u003ca href=\"https://github.com/huggingface/datasets/blob/master/datasets/gem/gem.py#L936\"\u003eat our existing data loader\u003c/a\u003e for reference.\u003c/li\u003e\n\u003c/ol\u003e\n\u003ch3 id=\"user-content-uploading-the-dataset\"\u003eUploading the dataset\u003c/h3\u003e\n\u003cp\u003eFirst add all the dataset files to \u003ccode\u003egit lfs\u003c/code\u003e tracking and then use git as usual to track all other files.\u003c/p\u003e\n\u003cpre\u003e\u003ccode\u003e\u003cspan\u003ecp\u003c/span\u003e /somewhere/data/*.json .\ngit lfs track *.json\ngit add .gitattributes\ngit add *.json\ngit commit -m \u003cspan\u003e\"add json files\"\u003c/span\u003e\u003c/code\u003e\u003c/pre\u003e\n\u003cp\u003eAfterwards you can also add the data card and all other files and commit them. Once everything is ready, simply run \u003ccode\u003egit push\u003c/code\u003e. After you enter your HuggingFace username and password, everything will be uploaded to the Hub!\nYou can find an example dataset with a challenge dataset (generated using an NL-Augmenter transformation) \u003ca href=\"https://huggingface.co/datasets/GEM/test-transform/tree/main\"\u003ehere\u003c/a\u003e.\u003c/p\u003e\n\u003cp\u003eYou can update the dataset simply by pushing updates the same way.\u003c/p\u003e\n\u003ch2 id=\"user-content-potential-errors\"\u003ePotential Errors\u003c/h2\u003e\n\u003ch3 id=\"user-content-git-lfs-is-not-a-git-command\"\u003egit: 'lfs' is not a git command.\u003c/h3\u003e\n\u003cp\u003egit lfs needs to be installed separately. Depending on your operating system, you can follow \u003ca href=\"https://stackoverflow.com/questions/48734119/git-lfs-is-not-a-git-command-unclear\"\u003ethis post\u003c/a\u003e to solve the issue.\u003c/p\u003e\n\u003ch3 id=\"user-content-403-client-error-forbidden-for-url\"\u003e403 Client Error: Forbidden for url\u003c/h3\u003e\n\u003cp\u003eYou may encounter the following when trying to create a dataset:\n\u003ccode\u003e403 Client Error: Forbidden for url: https://huggingface.co/api/repos/create - You don't have the rights to create a dataset under this namespace\u003c/code\u003e\u003c/p\u003e\n\u003cp\u003eThis happens when you are not part of the organization or have a typo in the creation command. Ensure that you are (1) logged in, (2) member of the GEM organization, and (3) have typed the \u003ccode\u003e--organization GEM\u003c/code\u003e command using all upper case letters.\u003c/p\u003e\n","title":"Adding a data loader","type":"Data","background":"This tutorial shows how to add your dataset to GEM."}},"__N_SSG":true},"page":"/tutorials/[id]","query":{"id":"new_data_loader"},"buildId":"b8rjfKshCOVHfiTDQnV_D","isFallback":false,"gsp":true,"scriptLoader":[]}</script></body></html>